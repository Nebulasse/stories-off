import axios from 'axios';

const API_URL = import.meta.env.VITE_API_URL;
const API_KEY = import.meta.env.VITE_API_KEY;

export type Style = 'bold' | 'romantic' | 'random';

const stylePrompts = {
  bold: {
    description: '–£–≤–µ—Ä–µ–Ω–Ω—ã–π –∏ —Ö–∞—Ä–∏–∑–º–∞—Ç–∏—á–Ω—ã–π –º—É–∂—á–∏–Ω–∞',
    characteristics: [
      '–ü—Ä–æ—è–≤–ª—è–µ—Ç –ª–∏–¥–µ—Ä—Å–∫–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞',
      '–ì–æ–≤–æ—Ä–∏—Ç –ø—Ä—è–º–æ –∏ –ø–æ –¥–µ–ª—É',
      '–ò—Å–ø–æ–ª—å–∑—É–µ—Ç —é–º–æ—Ä –∏ –ª–µ–≥–∫—É—é –∏—Ä–æ–Ω–∏—é',
      '–î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–µ–±–µ'
    ],
    examples: [
      '–¢–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∑–∞–∏–Ω—Ç—Ä–∏–≥–æ–≤–∞–ª–æ –º–µ–Ω—è. –î–∞–≤–∞–π –≤—Å—Ç—Ä–µ—Ç–∏–º—Å—è –∏ –æ–±—Å—É–¥–∏–º —ç—Ç–æ –ª–∏—á–Ω–æ?',
      '–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è —Ç–≤–æ–π –ø–æ–¥—Ö–æ–¥. –Ø –∑–Ω–∞—é –æ—Ç–ª–∏—á–Ω–æ–µ –º–µ—Å—Ç–æ, –≥–¥–µ –º—ã –º–æ–≥–ª–∏ –±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–±—â–µ–Ω–∏–µ.',
      '–¢—ã —è–≤–Ω–æ —Ä–∞–∑–±–∏—Ä–∞–µ—à—å—Å—è –≤ —ç—Ç–æ–º. –†–∞—Å—Å–∫–∞–∂–∏ –º–Ω–µ –±–æ–ª—å—à–µ –∑–∞ —á–∞—à–∫–æ–π –∫–æ—Ñ–µ?'
    ]
  },
  romantic: {
    description: '–ß—É–≤—Å—Ç–≤–µ–Ω–Ω—ã–π –∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π –º—É–∂—á–∏–Ω–∞',
    characteristics: [
      '–ü—Ä–æ—è–≤–ª—è–µ—Ç –∏—Å–∫—Ä–µ–Ω–Ω–∏–π –∏–Ω—Ç–µ—Ä–µ—Å',
      '–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ—Ç–∞—Ñ–æ—Ä—ã –∏ –ø–æ—ç—Ç–∏—á–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è',
      '–í–Ω–∏–º–∞—Ç–µ–ª–µ–Ω –∫ –¥–µ—Ç–∞–ª—è–º',
      '–í—ã—Ä–∞–∂–∞–µ—Ç —ç–º–æ—Ü–∏–∏ –æ—Ç–∫—Ä—ã—Ç–æ'
    ],
    examples: [
      '–¢–≤–æ–∏ —Å–ª–æ–≤–∞ —Ç—Ä–æ–Ω—É–ª–∏ –º–æ—ë —Å–µ—Ä–¥—Ü–µ. –Ø –±—ã —Ö–æ—Ç–µ–ª —É–∑–Ω–∞—Ç—å —Ç–µ–±—è –ª—É—á—à–µ...',
      '–í —Ç–≤–æ–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö —á—É–≤—Å—Ç–≤—É–µ—Ç—Å—è –æ—Å–æ–±–µ–Ω–Ω–∞—è —Ç–µ–ø–ª–æ—Ç–∞. –≠—Ç–æ –æ—á–µ–Ω—å –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç ‚ù§Ô∏è',
      '–¢—ã —É–º–µ–µ—à—å –Ω–∞—Ö–æ–¥–∏—Ç—å –Ω—É–∂–Ω—ã–µ —Å–ª–æ–≤–∞. –≠—Ç–æ —Ä–µ–¥–∫–∏–π –∏ —Ü–µ–Ω–Ω—ã–π –¥–∞—Ä üåπ'
    ]
  },
  random: {
    description: '–°–ø–æ–Ω—Ç–∞–Ω–Ω—ã–π –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –º—É–∂—á–∏–Ω–∞',
    characteristics: [
      '–ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π',
      '–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã',
      '–°–æ–∑–¥–∞–µ—Ç –ª–µ–≥–∫—É—é –∏ –≤–µ—Å–µ–ª—É—é –∞—Ç–º–æ—Å—Ñ–µ—Ä—É',
      '–ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –∏–¥–µ–∏'
    ],
    examples: [
      '–•–µ–π! –ê —á—Ç–æ –µ—Å–ª–∏ –Ω–∞–º —É—Å—Ç—Ä–æ–∏—Ç—å —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ? üé≤',
      '–ó–Ω–∞–µ—à—å, —á—Ç–æ –æ–±—â–µ–≥–æ –º–µ–∂–¥—É —Ç–≤–æ–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º –∏ —Ö–æ—Ä–æ—à–∏–º –∫–æ—Ñ–µ? –û–±–∞ –±–æ–¥—Ä—è—Ç –∏ –ø–æ–¥–Ω–∏–º–∞—é—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ! ‚òï',
      '–í–∞—É! –¢—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ –≤–¥–æ—Ö–Ω–æ–≤–∏–ª–∞ –º–µ–Ω—è –Ω–∞ –±–µ–∑—É–º–Ω—É—é –∏–¥–µ—é... üéØ'
    ]
  }
};

export const generateResponses = async (
  text: string,
  style: Style
): Promise<string[]> => {
  try {
    const response = await axios.post(
      `${API_URL}/chat/completions`,
      {
        model: 'deepseek-chat',
        messages: [
          {
            role: 'system',
            content: `–¢—ã - ${stylePrompts[style].description}. 
            –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ç–≤–æ–µ–≥–æ —Å—Ç–∏–ª—è –æ–±—â–µ–Ω–∏—è:
            ${stylePrompts[style].characteristics.join(', ')}.
            
            –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤ –≤ —Ç–≤–æ–µ–º —Å—Ç–∏–ª–µ:
            ${stylePrompts[style].examples.join('\n')}
            
            –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π 3 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –¥–µ–≤—É—à–∫–∏, —Å–æ—Ö—Ä–∞–Ω—è—è –∑–∞–¥–∞–Ω–Ω—ã–π —Å—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è.`
          },
          {
            role: 'user',
            content: text
          }
        ],
        max_tokens: 1000,
        temperature: 0.7,
        n: 3
      },
      {
        headers: {
          'Authorization': `Bearer ${API_KEY}`,
          'Content-Type': 'application/json'
        }
      }
    );

    return response.data.choices.map((choice: any) => choice.message.content);
  } catch (error) {
    console.error('Error generating responses:', error);
    throw error;
  }
}; 